<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buat Janji Temu</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
            color: #212529;
            line-height: 1.6;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background-color: #e2e8f0;
            border: 1px solid #e2e8f0;
        }
        .calendar-day {
            background-color: white;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
        }
        .calendar-day:hover {
            background-color: #f0f4f8;
        }
        .calendar-day.selected {
            font-weight: bold;
            background-color: #00A693;
            color: white;
        }
        .calendar-day-label {
            font-weight: 600;
            background-color: #f7fafc;
            text-align: center;
            padding: 8px;
        }
    </style>
</head>
<body class="bg-gray-100 p-8">

    <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-8">
        <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Buat Janji Temu</h2>
        <form id="appointment-form" class="space-y-6">
            <!-- Kalender -->
            <div class="mb-8">
                <label class="block text-gray-700 font-semibold mb-4">Pilih Tanggal</label>
                <div class="flex justify-between items-center mb-4">
                    <button type="button" id="prevMonth" class="text-teal-500 hover:text-teal-600"><i class="fas fa-chevron-left"></i></button>
                    <span id="currentMonthYear" class="text-lg font-semibold"></span>
                    <button type="button" id="nextMonth" class="text-teal-500 hover:text-teal-600"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div id="calendar" class="calendar-grid rounded-lg overflow-hidden">
                    <div class="calendar-day-label">Min</div>
                    <div class="calendar-day-label">Sen</div>
                    <div class="calendar-day-label">Sel</div>
                    <div class="calendar-day-label">Rab</div>
                    <div class="calendar-day-label">Kam</div>
                    <div class="calendar-day-label">Jum</div>
                    <div class="calendar-day-label">Sab</div>
                </div>
            </div>

            <!-- Tanggal Terpilih (hidden) -->
            <input type="hidden" id="tanggal" name="tanggal" required>
            
            <!-- Jam -->
            <div>
                <label for="jam" class="block text-gray-700 font-semibold mb-2">Jam</label>
                <input type="time" id="jam" name="jam" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500" required>
            </div>

            <!-- Fasilitas Kesehatan (Faskes) -->
            <div>
                <label for="faskes" class="block text-gray-700 font-semibold mb-2">Pilih Fasilitas Kesehatan</label>
                <select id="faskes" name="faskes" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500" required>
                    <option value="">-- Pilih Faskes --</option>
                    <option value="puskesmas">Puskesmas Tumbuh Sehat</option>
                    <option value="rumahsakit">Rumah Sakit Bunda dan Anak</option>
                    <option value="klinik">Klinik Sehat Keluarga</option>
                </select>
            </div>
            
            <!-- Keluhan -->
            <div>
                <label for="keluhan" class="block text-gray-700 font-semibold mb-2">Keluhan</label>
                <textarea id="keluhan" name="keluhan" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500" placeholder="Jelaskan keluhan yang akan Anda konsultasikan..." required></textarea>
            </div>

            <!-- Tombol Simpan -->
            <button type="submit" class="w-full bg-teal-500 text-white font-semibold py-3 rounded-full shadow-lg hover:bg-teal-600 transition-colors">
                Buat Janji Temu
            </button>
        </form>

        <!-- Notifikasi (disembunyikan secara default) -->
        <div id="notification-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50">
            <div class="bg-white p-8 rounded-xl shadow-2xl text-center max-w-sm mx-auto transform scale-95 opacity-0 transition-all duration-300">
                <div class="text-4xl text-green-500 mb-4">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h4 class="text-2xl font-bold mb-2">Janji Temu Berhasil Dibuat!</h4>
                <p class="text-gray-600 mb-6">Janji temu Anda telah berhasil disimpan. Silakan datang tepat waktu.</p>
                <button id="back-to-home" class="bg-teal-500 text-white font-semibold py-2 px-6 rounded-full hover:bg-teal-600 transition-colors">
                    Kembali ke Beranda
                </button>
            </div>
        </div>

    </div>

    <script>
        const form = document.getElementById('appointment-form');
        const modal = document.getElementById('notification-modal');
        const backButton = document.getElementById('back-to-home');

        const calendar = document.getElementById('calendar');
        const currentMonthYear = document.getElementById('currentMonthYear');
        const prevMonthBtn = document.getElementById('prevMonth');
        const nextMonthBtn = document.getElementById('nextMonth');
        const tanggalInput = document.getElementById('tanggal');

        let currentDate = new Date();
        let selectedDate = null;

        const months = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];

        const renderCalendar = () => {
            currentMonthYear.textContent = `${months[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
            calendar.innerHTML = '';
            
            // Add day labels
            const daysOfWeek = ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'];
            daysOfWeek.forEach(day => {
                const label = document.createElement('div');
                label.className = 'calendar-day-label';
                label.textContent = day;
                calendar.appendChild(label);
            });

            // Get first day and last day of the month
            const firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);

            // Add empty days for alignment
            for (let i = 0; i < firstDayOfMonth.getDay(); i++) {
                const emptyDiv = document.createElement('div');
                emptyDiv.className = 'calendar-day bg-gray-100 cursor-default';
                calendar.appendChild(emptyDiv);
            }

            // Add real days
            for (let i = 1; i <= lastDayOfMonth.getDate(); i++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                dayDiv.textContent = i;
                dayDiv.dataset.day = i;
                
                dayDiv.addEventListener('click', () => {
                    const allDays = calendar.querySelectorAll('.calendar-day');
                    allDays.forEach(d => d.classList.remove('selected'));
                    dayDiv.classList.add('selected');
                    selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), i);
                    const formattedDate = selectedDate.toISOString().split('T')[0];
                    tanggalInput.value = formattedDate;
                });
                calendar.appendChild(dayDiv);
            }
        };

        prevMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        });

        nextMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        });

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            // Show modal
            modal.classList.remove('hidden');
            // Animate modal
            setTimeout(() => {
                const modalContent = modal.querySelector('div');
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 50);
        });

        backButton.addEventListener('click', function() {
            window.location.href = 'index.html';
        });

        // Initial render
        renderCalendar();
    </script>

</body>
</html>
